<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI 认知功能分析器</title>
    <style>
        :root {
            --primary-color: #4F46E5;
            --border-color: #E5E7EB;
            --bg-gray: #F9FAFB;
            --text-gray: #6B7280;
            --hover-color: #4338CA;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.5;
            color: #111827;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #f3f4f6;
        }

        .container {
            background: white;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
        }

        .select-container {
            margin-bottom: 2rem;
        }

        select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            margin-top: 0.5rem;
            background-color: white;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        select:hover {
            border-color: var(--primary-color);
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .tab {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-gray);
            border-radius: 0.5rem 0.5rem 0 0;
            transition: all 0.2s;
            font-weight: 500;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--primary-color);
            background-color: var(--bg-gray);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: var(--bg-gray);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .function-stack {
            display: grid;
            gap: 1rem;
        }

        .function-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-gray);
            border-radius: 0.5rem;
            align-items: start;
        }

        .function-code {
            font-weight: bold;
            font-size: 1.125rem;
            min-width: 3rem;
        }

        .function-details {
            flex: 1;
        }

        .function-description {
            margin-bottom: 0.25rem;
        }

        .position-description {
            font-size: 0.875rem;
            color: var(--text-gray);
        }

        .quadra-info {
            padding: 1rem;
            background: var(--bg-gray);
            border-radius: 0.5rem;
        }

        .quadra-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .type-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .type-tag {
            padding: 0.25rem 0.75rem;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            font-size: 0.875rem;
        }

        .cognitive-info {
            display: grid;
            gap: 1.5rem;
        }

        .cognitive-info h3 {
            color: var(--primary-color);
            margin: 2rem 0 1rem;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .function-cognitive {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            transition: transform 0.2s;
        }

        .function-cognitive:hover {
            transform: translateY(-2px);
        }

        .function-cognitive h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .function-cognitive p {
            margin: 0.5rem 0;
            color: var(--text-gray);
            line-height: 1.6;
        }

        .socionics-info {
            display: grid;
            gap: 1.5rem;
            justify-content: center;
        }

        .socionics-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
        }

        .socionics-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .socionics-card h4 {
            color: var(--hover-color);
            margin: 1rem 0 0.5rem;
            font-size: 1.1rem;
        }

        .socionics-info p {
            margin: 0.75rem 0;
            line-height: 1.6;
        }

        .socionics-info strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .relationship-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .relationship-item {
            background: var(--bg-gray);
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
        }

        .type-column {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
        }

        .type-column h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .growth-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: var(--card-shadow);
        }

        .growth-card h3 {
            color: var(--primary-color);
            margin: 1.5rem 0 1rem;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .growth-card ul {
            list-style-position: inside;
            margin: 1rem 0;
        }

        .growth-card li {
            margin: 0.5rem 0;
            color: var(--text-gray);
        }

        .test-container {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: var(--card-shadow);
        }

        .question {
            margin-bottom: 1rem;
            padding: 1rem;
            background: var(--bg-gray);
            border-radius: 0.5rem;
        }

        .question h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .option {
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .option:hover {
            background: var(--bg-gray);
            border-color: var(--primary-color);
        }

        .option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: var(--bg-gray);
            border-radius: 0.25rem;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--primary-color);
            border-radius: 0.25rem;
            transition: width 0.3s;
            width: 0;
        }

        .result-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .result-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .result-details {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-gray);
            border-radius: 0.5rem;
        }

        .test-button {
            display: block;
            width: 100%;
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 1rem;
        }

        .test-button:hover {
            background: var(--hover-color);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content {
            animation: fadeIn 0.3s ease-out;
        }

        .personality-label {
            transition: all 0.2s;
            user-select: none;
        }

        .personality-label:hover {
            background: var(--primary-color) !important;
            color: white !important;
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .label-description {
            transition: all 0.2s;
            line-height: 1.6;
            color: var(--text-gray);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="select-container">
            <label for="mbti-select">选择MBTI类型：</label>
            <select id="mbti-select">
                <option value="">请选择...</option>
            </select>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="functions">认知功能堆栈</button>
            <button class="tab" data-tab="socionics">Socionics对应关系</button>
            <button class="tab" data-tab="quadra">象限分析</button>
            <button class="tab" data-tab="cognitive">认知功能位置</button>
            <button class="tab" data-tab="compare">类型比较</button>
            <button class="tab" data-tab="growth">成长建议</button>
            <button class="tab" data-tab="test">互动测试</button>
        </div>

        <div id="functions" class="tab-content active">
            <div class="function-stack"></div>
        </div>

        <div id="socionics" class="tab-content">
            <div class="socionics-info"></div>
        </div>

        <div id="quadra" class="tab-content">
            <div class="quadra-info"></div>
        </div>

        <div id="cognitive" class="tab-content">
            <div class="cognitive-info">
                <h3>主要功能</h3>

                <div class="function-cognitive">
                    <h4>主导功能（首选功能）</h4>
                    <p>- 最自然和熟练使用的功能</p>
                    <p>- 在压力较小时最容易表现出来</p>
                    <p>- 影响个人最基本的认知方式和行为模式</p>
                    <p>- 通常在童年早期就开始发展</p>
                    <p>- 使用这个功能会让人感到最舒适和自信</p>
                </div>

                <div class="function-cognitive">
                    <h4>辅助功能（副首选功能）</h4>
                    <p>- 支持主导功能的平衡器</p>
                    <p>- 提供了与主导功能相反的能量方向（内倾/外倾）</p>
                    <p>- 在青少年时期开始发展</p>
                    <p>- 帮助个人与外界互动的重要工具</p>
                    <p>- 在健康发展的个体中表现得较为成熟</p>
                </div>

                <div class="function-cognitive">
                    <h4>第三功能（第三位置）</h4>
                    <p>- 较不成熟的功能</p>
                    <p>- 常常是个人不安全感的来源</p>
                    <p>- 在成年早期开始显著发展</p>
                    <p>- 可能表现得不稳定或敏感</p>
                    <p>- 是个人成长的重要领域</p>
                </div>

                <div class="function-cognitive">
                    <h4>劣势功能（下级功能）</h4>
                    <p>- 最不发达的意识功能</p>
                    <p>- 在压力下容易表现出来</p>
                    <p>- 常常是个人的"阿喀琉斯之踵"</p>
                    <p>- 需要终身发展</p>
                    <p>- 可能是个人盲点的来源</p>
                </div>

                <h3>影子功能</h3>

                <div class="function-cognitive">
                    <h4>对立角色（第五位置）</h4>
                    <p>- 主导功能的对立面</p>
                    <p>- 在压力情况下可能突然出现</p>
                    <p>- 可能导致过度批评和怀疑自己</p>
                    <p>- 往往带来防御性反应</p>
                    <p>- 需要意识到并适当整合</p>
                </div>

                <div class="function-cognitive">
                    <h4>批判角色（第六位置）</h4>
                    <p>- 辅助功能的对立面</p>
                    <p>- 容易对他人产生批判性想法</p>
                    <p>- 可能导致固执或偏见</p>
                    <p>- 常常是内在冲突的来源</p>
                    <p>- 需要学会更开放和包容</p>
                </div>

                <div class="function-cognitive">
                    <h4>欺骗角色（第七位置）</h4>
                    <p>- 第三功能的对立面</p>
                    <p>- 容易产生自欺欺人的行为</p>
                    <p>- 可能导致不切实际的期望</p>
                    <p>- 在压力下可能表现为逃避现实</p>
                    <p>- 需要培养现实认知</p>
                </div>

                <div class="function-cognitive">
                    <h4>恶魔角色（第八位置）</h4>
                    <p>- 最不发达的无意识功能</p>
                    <p>- 在极度压力下可能突然爆发</p>
                    <p>- 可能导致破坏性行为</p>
                    <p>- 往往与最深层的恐惧相关</p>
                    <p>- 需要认识并谨慎处理</p>
                </div>

                <div class="function-cognitive">
                    <h4>功能发展建议</h4>
                    <p>1. 优先发展主导和辅助功能</p>
                    <p>2. 逐步关注第三功能的改善</p>
                    <p>3. 接纳并理解劣势功能的局限</p>
                    <p>4. 意识到影子功能的存在及其影响</p>
                    <p>5. 在压力管理中考虑各功能的作用</p>
                    <p>6. 通过自我反思来整合各种功能</p>
                </div>
            </div>
        </div>

        <div id="compare" class="tab-content">
            <div class="select-container">
                <label for="compare-select">选择要比较的类型：</label>
                <select id="compare-select">
                    <option value="">请选择...</option>
                </select>
            </div>
            <div class="comparison-container"></div>
        </div>

        <div id="growth" class="tab-content">
            <div class="growth-card"></div>
        </div>

        <div id="test" class="tab-content">
            <div class="test-container">
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <div class="question-container"></div>
                <div class="result-card"></div>
                <button class="test-button" style="display: none;">重新开始测试</button>
            </div>
        </div>
    </div>
    <script>
        // MBTI类型数据
        const mbtiTypes = {
            'INTP': { name: '逻辑学家', stack: ['Ti', 'Ne', 'Si', 'Fe', 'Te', 'Ni', 'Se', 'Fi'] },
            'INTJ': { name: '建筑师', stack: ['Ni', 'Te', 'Fi', 'Se', 'Ne', 'Ti', 'Fe', 'Si'] },
            'INFP': { name: '调停者', stack: ['Fi', 'Ne', 'Si', 'Te', 'Fe', 'Ni', 'Se', 'Ti'] },
            'INFJ': { name: '提倡者', stack: ['Ni', 'Fe', 'Ti', 'Se', 'Ne', 'Fi', 'Te', 'Si'] },
            'ISTP': { name: '鉴赏家', stack: ['Ti', 'Se', 'Ni', 'Fe', 'Te', 'Si', 'Ne', 'Fi'] },
            'ISTJ': { name: '检查员', stack: ['Si', 'Te', 'Fi', 'Ne', 'Se', 'Ti', 'Fe', 'Ni'] },
            'ISFP': { name: '探险家', stack: ['Fi', 'Se', 'Ni', 'Te', 'Fe', 'Si', 'Ne', 'Ti'] },
            'ISFJ': { name: '守卫者', stack: ['Si', 'Fe', 'Ti', 'Ne', 'Se', 'Fi', 'Te', 'Ni'] },
            'ENTP': { name: '辩论家', stack: ['Ne', 'Ti', 'Fe', 'Si', 'Ni', 'Te', 'Fi', 'Se'] },
            'ENTJ': { name: '指挥官', stack: ['Te', 'Ni', 'Se', 'Fi', 'Ti', 'Ne', 'Si', 'Fe'] },
            'ENFP': { name: '竞选者', stack: ['Ne', 'Fi', 'Te', 'Si', 'Ni', 'Fe', 'Ti', 'Se'] },
            'ENFJ': { name: '主人公', stack: ['Fe', 'Ni', 'Se', 'Ti', 'Fi', 'Ne', 'Si', 'Te'] },
            'ESTP': { name: '企业家', stack: ['Se', 'Ti', 'Fe', 'Ni', 'Si', 'Te', 'Fi', 'Ne'] },
            'ESTJ': { name: '总管', stack: ['Te', 'Si', 'Ne', 'Fi', 'Ti', 'Se', 'Ni', 'Fe'] },
            'ESFP': { name: '表演者', stack: ['Se', 'Fi', 'Te', 'Ni', 'Si', 'Fe', 'Ti', 'Ne'] },
            'ESFJ': { name: '执政官', stack: ['Fe', 'Si', 'Ne', 'Ti', 'Fi', 'Se', 'Ni', 'Te'] }
        };

        // 成长建议数据
        const growthAdvice = {
            'INTP': {
                strengths: [
                    '卓越的逻辑分析能力',
                    '创新性思维',
                    '对理论和概念的深刻理解',
                    '独立性强',
                    '适应性好'
                ],
                weaknesses: [
                    '情感表达困难',
                    '实践能力欠缺',
                    '容易忽视细节',
                    '可能显得疏离',
                    '决策效率低'
                ],
                advice: [
                    '培养情感表达和同理心',
                    '将理论知识应用到实践中',
                    '建立日常规律和时间管理习惯',
                    '主动参与社交活动增加人际互动',
                    '学习做出及时决策，避免过度分析'
                ]
            },
            'INTJ': {
                strengths: [
                    '战略规划能力强',
                    '独立思考',
                    '追求持续改进',
                    '高度自律',
                    '洞察力强'
                ],
                weaknesses: [
                    '可能过于完美主义',
                    '情感表达受限',
                    '不耐烦他人效率低下',
                    '可能显得傲慢',
                    '难以接受他人建议'
                ],
                advice: [
                    '培养耐心和同理心',
                    '学会在细节和整体之间取得平衡',
                    '提高情感智商和人际交往能力',
                    '保持开放心态，接纳不同观点',
                    '在追求完美和实际可行性之间找到平衡'
                ]
            },
            'INFP': {
                strengths: [
                    '强烈的同理心',
                    '创造力丰富',
                    '坚持理想和价值观',
                    '适应力强',
                    '善于倾听他人'
                ],
                weaknesses: [
                    '过于理想化',
                    '组织能力欠佳',
                    '难以处理批评',
                    '容易陷入情绪',
                    '决断力不足'
                ],
                advice: [
                    '建立实际可行的目标系统',
                    '提高组织和规划能力',
                    '学习客观处理批评和反馈',
                    '培养理性决策能力',
                    '在理想和现实之间找到平衡'
                ]
            },
            'INFJ': {
                strengths: [
                    '洞察力敏锐',
                    '同理心强',
                    '有远见',
                    '追求和谐',
                    '创造性思维'
                ],
                weaknesses: [
                    '容易完美主义',
                    '过度理想化',
                    '难以说不',
                    '容易情绪耗竭',
                    '过分关注他人需求'
                ],
                advice: [
                    '学会设立界限',
                    '培养务实态度',
                    '发展自我照顾能力',
                    '保持独立判断',
                    '在理想和现实间取得平衡'
                ]
            },
            'ISTP': {
                strengths: [
                    '灵活适应力强',
                    '解决问题能力出色',
                    '实践动手能力强',
                    '冷静理性',
                    '危机处理能力好'
                ],
                weaknesses: [
                    '不善于长期规划',
                    '情感表达困难',
                    '可能显得冷漠',
                    '难以持续专注',
                    '不擅长人际互动'
                ],
                advice: [
                    '培养长期规划意识',
                    '提高情感表达能力',
                    '发展人际交往技巧',
                    '培养耐心和专注力',
                    '学会与他人分享想法和感受'
                ]
            },
            'ISTJ': {
                strengths: [
                    '责任心强',
                    '注重细节',
                    '组织能力强',
                    '可靠稳重',
                    '逻辑思维清晰'
                ],
                weaknesses: [
                    '过分保守',
                    '不善变通',
                    '可能过于死板',
                    '不擅长处理变化',
                    '情感表达受限'
                ],
                advice: [
                    '培养开放和创新思维',
                    '提高适应变化的能力',
                    '发展情感表达能力',
                    '学会灵活处理问题',
                    '在传统和创新之间寻找平衡'
                ]
            },
            'ISFP': {
                strengths: [
                    '艺术感知力强',
                    '同理心丰富',
                    '灵活适应',
                    '和平主义者',
                    '注重体验当下'
                ],
                weaknesses: [
                    '规划能力欠佳',
                    '难以长期专注',
                    '容易优柔寡断',
                    '不擅长冲突处理',
                    '可能过度理想化'
                ],
                advice: [
                    '提高规划和组织能力',
                    '培养决策能力',
                    '学习处理冲突的技巧',
                    '建立长期目标',
                    '在理想和现实之间找到平衡'
                ]
            },
            'ISFJ': {
                strengths: [
                    '细心负责',
                    '关怀他人',
                    '注重细节',
                    '忠诚可靠',
                    '善于观察'
                ],
                weaknesses: [
                    '难以改变',
                    '容易忽视自身需求',
                    '不善于表达不满',
                    '过分在意他人看法',
                    '可能过度保护'
                ],
                advice: [
                    '学会适应变化',
                    '培养自我关怀意识',
                    '提高自我表达能力',
                    '建立健康界限',
                    '在照顾他人和自我需求间取得平衡'
                ]
            },
            'ENTP': {
                strengths: [
                    '创新能力强',
                    '思维敏捷',
                    '适应力强',
                    '善于辩论',
                    '充满活力'
                ],
                weaknesses: [
                    '注意力分散',
                    '可能过于好辩',
                    '难以坚持完成',
                    '情感表达不稳定',
                    '可能忽视细节'
                ],
                advice: [
                    '培养专注力和毅力',
                    '提高情商和同理心',
                    '加强执行力和完成度',
                    '注意细节管理',
                    '在创新和实践之间找到平衡'
                ]
            },
            'ENTJ': {
                strengths: [
                    '领导能力强',
                    '决策果断',
                    '目标导向',
                    '组织能力强',
                    '战略思维出色'
                ],
                weaknesses: [
                    '可能过于专制',
                    '情感表达不足',
                    '急躁不耐烦',
                    '可能显得咄咄逼人',
                    '难以接受失败'
                ],
                advice: [
                    '培养耐心和同理心',
                    '提高情商和人际敏感度',
                    '学会倾听他人意见',
                    '发展情感表达能力',
                    '在目标和人际关系间取得平衡'
                ]
            },
            'ENFP': {
                strengths: [
                    '创造力强',
                    '热情洋溢',
                    '善于激励他人',
                    '适应力强',
                    '同理心丰富'
                ],
                weaknesses: [
                    '难以持续专注',
                    '组织能力欠佳',
                    '容易分心',
                    '可能过度理想化',
                    '难以做出决定'
                ],
                advice: [
                    '提高专注力和执行力',
                    '加强组织和规划能力',
                    '培养务实态度',
                    '提高决策能力',
                    '在创意和实践之间找到平衡'
                ]
            },
            'ENFJ': {
                strengths: [
                    '领导魅力强',
                    '同理心出色',
                    '沟通能力强',
                    '组织能力好',
                    '热心助人'
                ],
                weaknesses: [
                    '过分在意他人感受',
                    '可能忽视自身需求',
                    '容易情绪耗竭',
                    '难以接受批评',
                    '可能过度理想化'
                ],
                advice: [
                    '学会设立个人界限',
                    '培养自我关怀意识',
                    '提高抗压能力',
                    '保持独立判断',
                    '在助人和自我照顾间取得平衡'
                ]
            },
            'ESTP': {
                strengths: [
                    '行动力强',
                    '解决问题能力好',
                    '适应力强',
                    '现实主义者',
                    '善于把握机会'
                ],
                weaknesses: [
                    '可能冲动鲁莽',
                    '难以长期规划',
                    '可能忽视他人感受',
                    '不善于承诺',
                    '容易厌倦'
                ],
                advice: [
                    '培养长期规划意识',
                    '提高情商和同理心',
                    '发展耐心和专注力',
                    '学会权衡利弊',
                    '在冒险和稳定之间找到平衡'
                ]
            },
            'ESTJ': {
                strengths: [
                    '组织能力强',
                    '执行力好',
                    '责任心强',
                    '重视效率',
                    '实践能力强'
                ],
                weaknesses: [
                    '可能过于专制',
                    '不善变通',
                    '可能忽视情感需求',
                    '难以接受新想法',
                    '可能过于死板'
                ],
                advice: [
                    '培养灵活性和开放性',
                    '提高情商和同理心',
                    '学会倾听他人意见',
                    '发展创新思维',
                    '在传统和变革之间找到平衡'
                ]
            },
            'ESFP': {
                strengths: [
                    '热情活力充沛',
                    '善于社交',
                    '适应力强',
                    '实践能力好',
                    '乐观积极'
                ],
                weaknesses: [
                    '难以长期规划',
                    '容易分心',
                    '可能过度冲动',
                    '不善于做决定',
                    '可能逃避责任'
                ],
                advice: [
                    '发展长期规划能力',
                    '提高专注力和执行力',
                    '培养决策能力',
                    '学会承担责任',
                    '在享受当下和未来规划间取得平衡'
                ]
            },
            'ESFJ': {
                strengths: [
                    '人际关系好',
                    '组织能力强',
                    '关心他人',
                    '责任心强',
                    '善于合作'
                ],
                weaknesses: [
                    '过分在意他人看法',
                    '难以处理批评',
                    '可能过度保护',
                    '不善于变通',
                    '容易情绪化'
                ],
                advice: [
                    '培养独立判断能力',
                    '提高抗压能力',
                    '学会设立界限',
                    '发展适应变化的能力',
                    '在照顾他人和自我需求间取得平衡'
                ]
            }
        };

        // 测试问题数据
        const testQuestions = [
            // E vs I 外向/内向
            {
                question: "在社交场合中，你更倾向于：",
                options: [
                    { text: "主动与人交谈，从互动中获得能量", type: "E" },
                    { text: "保持安静观察，独处时感觉更自在", type: "I" }
                ]
            },
            {
                question: "在遇到问题时，你更喜欢：",
                options: [
                    { text: "与他人讨论，通过交谈寻找解决方案", type: "E" },
                    { text: "独自思考，在内心分析问题", type: "I" }
                ]
            },
            {
                question: "周末休息时，你更倾向于：",
                options: [
                    { text: "参加社交活动，与朋友聚会", type: "E" },
                    { text: "待在家里，享受独处时光", type: "I" }
                ]
            },
            {
                question: "在团队中，你通常会：",
                options: [
                    { text: "积极发言，分享想法", type: "E" },
                    { text: "先听取他人意见，仔细思考后再发言", type: "I" }
                ]
            },
            {
                question: "你更容易从哪里获得能量：",
                options: [
                    { text: "与他人互动和交流", type: "E" },
                    { text: "独处和自我反思", type: "I" }
                ]
            },

            // S vs N 感知/直觉
            {
                question: "在获取信息时，你更注重：",
                options: [
                    { text: "具体的事实和细节", type: "S" },
                    { text: "概念和可能性", type: "N" }
                ]
            },
            {
                question: "你更相信：",
                options: [
                    { text: "实际经验和具体事例", type: "S" },
                    { text: "直觉和未来潜力", type: "N" }
                ]
            },
            {
                question: "在解决问题时，你更倾向于：",
                options: [
                    { text: "遵循已证实有效的方法", type: "S" },
                    { text: "尝试新的、创新的解决方案", type: "N" }
                ]
            },
            {
                question: "你更关注：",
                options: [
                    { text: "当下的现实情况", type: "S" },
                    { text: "未来的可能性", type: "N" }
                ]
            },
            {
                question: "在学习新事物时，你更喜欢：",
                options: [
                    { text: "循序渐进，掌握具体细节", type: "S" },
                    { text: "先了解整体概念，再关注细节", type: "N" }
                ]
            },

            // T vs F 思考/情感
            {
                question: "在做决定时，你更依赖：",
                options: [
                    { text: "逻辑分析和客观事实", type: "T" },
                    { text: "个人价值观和感受", type: "F" }
                ]
            },
            {
                question: "在处理冲突时，你更看重：",
                options: [
                    { text: "找出问题的逻辑解决方案", type: "T" },
                    { text: "维护人际关系的和谐", type: "F" }
                ]
            },
            {
                question: "你认为更重要的是：",
                options: [
                    { text: "保持客观公正", type: "T" },
                    { text: "考虑他人感受", type: "F" }
                ]
            },
            {
                question: "在评价事物时，你更倾向于：",
                options: [
                    { text: "分析利弊，追求合理性", type: "T" },
                    { text: "考虑对人的影响，追求和谐", type: "F" }
                ]
            },
            {
                question: "面对批评时，你更希望得到：",
                options: [
                    { text: "直接的、客观的反馈", type: "T" },
                    { text: "温和的、体贴的建议", type: "F" }
                ]
            },

            // J vs P 判断/知觉
            {
                question: "你更喜欢：",
                options: [
                    { text: "提前计划，按计划执行", type: "J" },
                    { text: "保持灵活，随机应变", type: "P" }
                ]
            },
            {
                question: "对待工作/学习任务时，你倾向于：",
                options: [
                    { text: "制定清晰的计划和期限", type: "J" },
                    { text: "保持开放，视情况调整", type: "P" }
                ]
            },
            {
                question: "你更喜欢的工作环境是：",
                options: [
                    { text: "有明确的规则和结构", type: "J" },
                    { text: "灵活自由，可以随时调整", type: "P" }
                ]
            },
            {
                question: "面对决定时，你更倾向于：",
                options: [
                    { text: "尽快做出决定并执行", type: "J" },
                    { text: "保持开放，继续收集信息", type: "P" }
                ]
            },
            {
                question: "你的生活方式更接近：",
                options: [
                    { text: "有序、计划、可控", type: "J" },
                    { text: "随性、适应、自然", type: "P" }
                ]
            },

            // 额外的深入性格特征问题
            {
                question: "在团队项目中，你更看重：",
                options: [
                    { text: "效率和成果", type: "T" },
                    { text: "团队氛围和合作", type: "F" }
                ]
            },
            {
                question: "你更容易记住：",
                options: [
                    { text: "具体的细节和事实", type: "S" },
                    { text: "整体印象和联系", type: "N" }
                ]
            },
            {
                question: "压力下，你更倾向于：",
                options: [
                    { text: "制定计划，寻求控制", type: "J" },
                    { text: "保持开放，寻找选项", type: "P" }
                ]
            },
            {
                question: "在新环境中，你通常会：",
                options: [
                    { text: "主动寻找社交机会", type: "E" },
                    { text: "等待他人来接近你", type: "I" }
                ]
            },
            {
                question: "你更喜欢的工作类型是：",
                options: [
                    { text: "有明确流程和规范的工作", type: "S" },
                    { text: "需要创新和想象力的工作", type: "N" }
                ]
            }
        ];
        // 认知功能描述数据
        const functionDescriptions = {
            "Ti": {
                "name": "内倾思维",
                "description": "分析、分类和理解概念的内在逻辑。追求内在的逻辑一致性。",
                "position1Desc": ["持续追求逻辑一致性", "建立个人的理论体系", "深入分析问题的核心", "重视概念的准确性", "追求理解事物的本质"],
                "position2Desc": ["支持主要决策过程", "提供理性分析框架", "帮助系统化信息", "平衡感性与理性"],
                "position3Desc": ["可能表现不够成熟", "在压力下容易过度分析", "需要时间发展", "可能显得犹豫不决"],
                "position4Desc": ["在压力下可能过度教条", "可能忽视情感因素", "需要刻意发展", "是成长的重要方向"],
                "position5Desc": ["过度追求完美的逻辑体系", "陷入无休止的分析和推理", "对他人的逻辑观点过度批判", "在压力下表现强迫性思考", "难以接受不完美的解决方案"],
                "position6Desc": ["在压力下表现为僵化思维", "过分强调细节的逻辑一致性", "难以灵活应对实际情况", "可能表现出过度教条主义", "对不合逻辑的事物强烈抵触"],
                "position7Desc": ["容易忽视或排斥主观逻辑分析", "对深入思考感到不适和抗拒", "倾向于采用现成的解决方案", "难以建立个人的理论体系", "对逻辑推理缺乏耐心"],
                "position8Desc": ["极度排斥深入的逻辑分析", "可能完全依赖他人的判断", "对理论探讨产生焦虑", "难以独立进行系统思考", "对抽象概念产生排斥"]
            },
            "Te": {
                "name": "外倾思维",
                "description": "组织外部世界，实现目标的效率和逻辑。关注客观事实和系统。",
                "position1Desc": ["追求效率和结果", "建立系统和流程", "重视客观数据", "擅长规划执行", "注重实际成效"],
                "position2Desc": ["协助决策和执行", "提供实用解决方案", "优化工作流程", "平衡理想与现实"],
                "position3Desc": ["可能过于死板", "忽视人际感受", "需要更多灵活性", "可能显得专制"],
                "position4Desc": ["在压力下可能强加控制", "可能忽视直觉", "需要学会放松", "是自我完善的方向"],
                "position5Desc": ["过度追求效率和完美执行", "强制推行个人的工作方式", "对结果有不切实际的期望", "难以容忍计划的变动", "在压力下变得过度控制"],
                "position6Desc": ["在压力下变得独断专行", "过分依赖规则和程序", "忽视人性化管理的需求", "可能表现出控制欲过强", "对效率低下极度不耐烦"],
                "position7Desc": ["对组织和规划感到力不从心", "难以建立有效的工作系统", "容易陷入效率低下的困境", "对管理职责感到压力", "回避决策和领导角色"],
                "position8Desc": ["极度排斥组织和管理工作", "难以应对结构化的任务", "对效率和生产力感到焦虑", "完全依赖他人的决策和规划", "逃避任何系统性工作"]
            },
            "Fi": {
                "name": "内倾情感",
                "description": "深入理解个人价值观和情感。重视真实性和个人信念。",
                "position1Desc": ["强烈的个人价值观", "追求真实与真诚", "深刻的情感体验", "重视个人真实性", "坚持道德准则"],
                "position2Desc": ["协助价值判断", "提供道德指引", "增进自我了解", "平衡理性决策"],
                "position3Desc": ["可能过于主观", "难以表达情感", "需要更多客观性", "可能显得固执"],
                "position4Desc": ["在压力下情绪波动", "可能过度理想化", "需要接纳现实", "是情感成长的关键"],
                "position5Desc": ["过度坚持个人价值观", "对道德问题极度敏感", "难以接受与己不同的价值观", "在价值冲突时情绪激动", "对自我认同过分执着"],
                "position6Desc": ["对他人的价值观持批判态度", "在道德判断上过于严苛", "难以理解他人的情感需求", "可能表现出道德优越感", "对价值观差异缺乏包容"],
                "position7Desc": ["难以识别自身的情感需求", "对个人价值观感到困惑", "回避深入的情感体验", "难以形成稳定的价值体系", "对情感决策缺乏信心"],
                "position8Desc": ["极度排斥情感决策", "对价值观探讨感到不适", "难以建立情感连结", "对自我价值产生怀疑", "逃避任何情感深度"]
            },
            "Fe": {
                "name": "外倾情感",
                "description": "理解和调和群体情感。关注人际和谐与社交互动。",
                "position1Desc": ["敏锐感知群体氛围", "促进人际和谐", "关注他人需求", "善于情感表达", "追求社群和谐"],
                "position2Desc": ["改善人际关系", "营造积极氛围", "促进团队合作", "平衡个人与集体"],
                "position3Desc": ["可能过分迎合", "忽视自身需求", "需要建立界限", "可能情绪化"],
                "position4Desc": ["在压力下社交焦虑", "可能过度敏感", "需要学会自处", "是社交发展的重点"],
                "position5Desc": ["过度关注社交和谐", "强迫性地迎合他人", "对群体氛围过分敏感", "难以处理冲突情况", "在社交压力下情绪失控"],
                "position6Desc": ["对社交规范过度执着", "批判他人的情感表达", "在人际互动中显得生硬", "对社交礼仪过分苛求", "难以接受非传统的社交方式"],
                "position7Desc": ["难以理解群体动态", "对社交互动感到不适", "回避情感表达和分享", "在群体中感到格格不入", "难以维持社交关系"],
                "position8Desc": ["极度排斥社交活动", "对群体互动产生焦虑", "难以理解社交暗示", "完全回避情感交流", "对社交场合感到恐惧"]
            },
            "Ni": {
                "name": "内倾直觉",
                "description": "看到深层模式和未来可能性。综合信息形成深刻见解。",
                "position1Desc": ["深度洞察力", "预见未来趋势", "整合复杂信息", "追求长远愿景", "理解深层含义"],
                "position2Desc": ["提供战略视角", "发现隐藏模式", "预测可能结果", "平衡具体与抽象"],
                "position3Desc": ["可能过度解读", "忽视当下细节", "需要更多实践", "可能显得神秘"],
                "position4Desc": ["在压力下过度担忧", "可能陷入幻想", "需要脚踏实地", "是直觉发展的方向"],
                "position5Desc": ["过度沉迷未来预测", "对直觉印象过分执着", "难以接受计划变更", "对未来过度焦虑", "陷入阴暗的预感"],
                "position6Desc": ["对直觉洞察持怀疑态度", "批判他人的远见规划", "对未来发展过分担忧", "难以接受模糊性", "对直觉型决策不信任"],
                "position7Desc": ["难以看清长远影响", "对未来规划感到困惑", "回避战略性思考", "难以理解隐含意义", "对直觉判断缺乏信心"],
                "position8Desc": ["极度排斥未来规划", "对远见卓识感到不适", "难以理解象征意义", "完全依赖具体事实", "对不确定性产生焦虑"]
            },
            "Ne": {
                "name": "外倾直觉",
                "description": "探索可能性和新想法。发现概念间的联系。",
                "position1Desc": ["创新思维活跃", "发现多种可能", "联系不同概念", "享受头脑风暴", "追求新奇体验"],
                "position2Desc": ["激发创意灵感", "提供多元视角", "促进思维发散", "平衡传统与创新"],
                "position3Desc": ["可能注意力分散", "难以做出决定", "需要更多聚焦", "可能过于理想"],
                "position4Desc": ["在压力下举棋不定", "可能忽视现实", "需要学会专注", "是创造力的基础"],
                "position5Desc": ["过度追求新奇可能性", "对创新变革强迫性追求", "难以专注于现实任务", "在压力下思维发散失控", "对稳定性产生抵触"],
                "position6Desc": ["对创新想法持批判态度", "排斥非传统方法", "对可能性探索缺乏耐心", "难以接受开放性结果", "对创意思维表现怀疑"],
                "position7Desc": ["难以产生创新想法", "对可能性探索感到疲惫", "回避头脑风暴活动", "难以理解抽象概念", "对创意过程缺乏信心"],
                "position8Desc": ["极度排斥创新思维", "对可能性探索感到焦虑", "难以应对变化和创新", "完全依赖既定方案", "对新想法产生恐惧"]
            },
            "Si": {
                "name": "内倾感知",
                "description": "详细记忆过去经验。重视传统和具体细节。",
                "position1Desc": ["重视传统经验", "关注细节完整", "建立稳定秩序", "保持可靠责任", "重视实践经验"],
                "position2Desc": ["提供经验参考", "维护日常秩序", "确保可靠性", "平衡创新与传统"],
                "position3Desc": ["可能过分保守", "抗拒变化", "需要更多开放", "可能固守过往"],
                "position4Desc": ["在压力下过度担心", "可能过分保守", "需要接纳改变", "是稳定性的来源"],
                "position5Desc": ["过度依赖过往经验", "对细节完美主义倾向", "难以适应新环境", "在变化中感到不安", "对传统做法过分执着"],
                "position6Desc": ["对习惯改变持批判态度", "过分强调程序和规范", "对新方法表现抗拒", "难以接受非传统做法", "对经验偏差过分敏感"],
                "position7Desc": ["难以维持日常规律", "对细节观察力不足", "容易忽视实际经验", "难以建立稳定习惯", "对传统价值缺乏认同"],
                "position8Desc": ["极度排斥常规和习惯", "对细节关注产生焦虑", "难以保持稳定作息", "完全忽视传统经验", "对规律生活感到压抑"]
            },
            "Se": {
                "name": "外倾感知",
                "description": "敏锐感知当下环境。享受身体体验和即时反应。",
                "position1Desc": ["享受当下体验", "敏锐感知环境", "快速反应变化", "追求感官刺激", "善于实践操作"],
                "position2Desc": ["提升现实适应", "把握机会时机", "增强行动力", "平衡思考与行动"],
                "position3Desc": ["可能冲动行事", "忽视长远影响", "需要更多规划", "可能过度刺激"],
                "position4Desc": ["在压力下感官过敏", "可能逃避现实", "需要学会节制", "是行动力的基础"],
                "position5Desc": ["过度追求感官刺激", "对现实体验强迫性需求", "难以控制冲动行为", "在压力下寻求刺激", "对安静环境感到不适"],
                "position6Desc": ["对感官体验持批判态度", "排斥物质享受", "对现实活动缺乏投入", "难以享受当下时刻", "对体验型学习表示怀疑"],
                "position7Desc": ["难以把握当下机会", "对环境变化反应迟钝", "回避实践性活动", "难以适应现实情况", "对身体感知缺乏敏锐"],
                "position8Desc": ["极度排斥感官体验", "对物质世界感到焦虑", "难以应对实际情况", "完全逃避现实活动", "对身体活动感到恐惧"]
            }
        }
        const socionicsTypes = {
            'INTP': {
                type: 'LII',
                name: '研究者',
                quadra: 'Alpha',
                romance: 'ESFJ (ESE)',
                benefit: 'ENFJ (EIE)',
                supervision: 'ISFP (SEI)',
                description: '理性的分析者，专注于系统和理论的逻辑结构。在Alpha象限中，强调知识共享和理性讨论。'
            },
            'INTJ': {
                type: 'ILI',
                name: '评论家',
                quadra: 'Gamma',
                romance: 'ESFP (SEE)',
                benefit: 'ENTJ (LIE)',
                supervision: 'ISFJ (ESI)',
                description: '战略思考者，擅长预测趋势和分析系统漏洞。在Gamma象限中，注重效率和现实可行性。'
            },
            'INFP': {
                type: 'EII',
                name: '人道主义者',
                quadra: 'Delta',
                romance: 'ESTJ (LSE)',
                benefit: 'ENFP (IEE)',
                supervision: 'ISTP (SLI)',
                description: '道德价值的守护者，关注个人成长和伦理准则。在Delta象限中，追求稳定和渐进式改革。'
            },
            'INFJ': {
                type: 'IEI',
                name: '先知',
                quadra: 'Beta',
                romance: 'ESTP (SLE)',
                benefit: 'ENFJ (EIE)',
                supervision: 'ISTJ (LSI)',
                description: '富有洞察力的理想主义者，关注社会变革。在Beta象限中，强调力量和意志力的重要性。'
            },
            'ISTP': {
                type: 'SLI',
                name: '工匠',
                quadra: 'Delta',
                romance: 'ENFP (IEE)',
                benefit: 'ESTJ (LSE)',
                supervision: 'INFJ (IEI)',
                description: '实践型专家，专注于技术和工艺的完善。在Delta象限中，重视实用性和可靠性。'
            },
            'ISTJ': {
                type: 'LSI',
                name: '检查官',
                quadra: 'Beta',
                romance: 'ENFJ (EIE)',
                benefit: 'ESTP (SLE)',
                supervision: 'INFP (EII)',
                description: '系统的组织者，注重规则和秩序。在Beta象限中，强调纪律和责任。'
            },
            'ISFP': {
                type: 'SEI',
                name: '调解者',
                quadra: 'Alpha',
                romance: 'ENTJ (LIE)',
                benefit: 'ESFJ (ESE)',
                supervision: 'INTJ (ILI)',
                description: '感性的享乐主义者，善于创造舒适氛围。在Alpha象限中，重视和谐与舒适。'
            },
            'ISFJ': {
                type: 'ESI',
                name: '卫士',
                quadra: 'Gamma',
                romance: 'ENTP (ILE)',
                benefit: 'ESFP (SEE)',
                supervision: 'INTP (LII)',
                description: '忠诚的保护者，维护传统和关系。在Gamma象限中，注重安全和责任。'
            },
            'ENTP': {
                type: 'ILE',
                name: '发起者',
                quadra: 'Alpha',
                romance: 'ISFJ (ESI)',
                benefit: 'INTP (LII)',
                supervision: 'ESFJ (ESE)',
                description: '创新的思想家，善于发现新机会。在Alpha象限中，推动思想交流和创新。'
            },
            'ENTJ': {
                type: 'LIE',
                name: '企业家',
                quadra: 'Gamma',
                romance: 'ISFP (SEI)',
                benefit: 'INTJ (ILI)',
                supervision: 'ESFP (SEE)',
                description: '果断的领导者，追求效率和成功。在Gamma象限中，强调目标和成就。'
            },
            'ENFP': {
                type: 'IEE',
                name: '心理学家',
                quadra: 'Delta',
                romance: 'ISTP (SLI)',
                benefit: 'INFP (EII)',
                supervision: 'ESTJ (LSE)',
                description: '充满想象力的激励者，关注他人潜能。在Delta象限中，追求个人成长和社会和谐。'
            },
            'ENFJ': {
                type: 'EIE',
                name: '导师',
                quadra: 'Beta',
                romance: 'ISTJ (LSI)',
                benefit: 'INFJ (IEI)',
                supervision: 'ESTP (SLE)',
                description: '富有魅力的领导者，善于动员和激励他人。在Beta象限中，推动集体行动和变革。'
            },
            'ESTP': {
                type: 'SLE',
                name: '政治家',
                quadra: 'Beta',
                romance: 'INFJ (IEI)',
                benefit: 'ISTJ (LSI)',
                supervision: 'ENFP (IEE)',
                description: '实践型领导者，善于掌控局势。在Beta象限中，强调力量和行动。'
            },
            'ESTJ': {
                type: 'LSE',
                name: '管理者',
                quadra: 'Delta',
                romance: 'INFP (EII)',
                benefit: 'ISTP (SLI)',
                supervision: 'ENFJ (EIE)',
                description: '实用主义的组织者，追求效率和结果。在Delta象限中，重视秩序和实际成果。'
            },
            'ESFP': {
                type: 'SEE',
                name: '政治家',
                quadra: 'Gamma',
                romance: 'INTJ (ILI)',
                benefit: 'ISFJ (ESI)',
                supervision: 'ENTJ (LIE)',
                description: '热情的表演者，善于把握机会。在Gamma象限中，追求实际利益和影响力。'
            },
            'ESFJ': {
                type: 'ESE',
                name: '热情者',
                quadra: 'Alpha',
                romance: 'INTP (LII)',
                benefit: 'ISFP (SEI)',
                supervision: 'ENTP (ILE)',
                description: '群体活动的组织者，创造和谐氛围。在Alpha象限中，促进社交互动和情感交流。'
            }
        };
        const personalityLabels = {
            'INTP': [
                '理性的', '逻辑的', '创新的', '独立的', '好奇的',
                '分析的', '沉静的', '灵活的', '适应的', '客观的'
            ],
            'INTJ': [
                '战略的', '独立的', '分析的', '决断的', '理性的',
                '完美的', '创新的', '专注的', '有远见的', '系统的'
            ],
            'INFP': [
                '理想的', '富同情心的', '创造的', '忠诚的', '适应的',
                '温和的', '关怀的', '敏感的', '包容的', '真诚的'
            ],
            'INFJ': [
                '洞察的', '理想的', '富同情心的', '有远见的', '创造的',
                '温和的', '坚定的', '完美的', '独特的', '神秘的'
            ],
            'ISTP': [
                '灵活的', '冷静的', '实践的', '逻辑的', '独立的',
                '适应的', '观察的', '效率的', '冒险的', '客观的'
            ],
            'ISTJ': [
                '可靠的', '实际的', '系统的', '尽责的', '传统的',
                '组织的', '稳重的', '专注的', '逻辑的', '保守的'
            ],
            'ISFP': [
                '艺术的', '灵活的', '敏感的', '和谐的', '自然的',
                '观察的', '适应的', '忠诚的', '温和的', '关怀的'
            ],
            'ISFJ': [
                '忠诚的', '体贴的', '负责的', '传统的', '实际的',
                '细心的', '温和的', '可靠的', '组织的', '保护的'
            ],
            'ENTP': [
                '创新的', '活力的', '适应的', '机智的', '灵活的',
                '分析的', '好奇的', '理论的', '战略的', '辩论的'
            ],
            'ENTJ': [
                '领导的', '决断的', '战略的', '自信的', '效率的',
                '直接的', '理性的', '目标导向的', '分析的', '有魄力的'
            ],
            'ENFP': [
                '热情的', '创造的', '适应的', '创新的', '活力的',
                '乐观的', '灵活的', '关怀的', '自发的', '表现的'
            ],
            'ENFJ': [
                '热情的', '富同情心的', '负责的', '理想的', '社交的',
                '合作的', '关怀的', '忠诚的', '有魅力的', '鼓舞的'
            ],
            'ESTP': [
                '活力的', '冒险的', '实践的', '灵活的', '自发的',
                '适应的', '行动的', '果断的', '效率的', '现实的'
            ],
            'ESTJ': [
                '组织的', '实际的', '负责的', '系统的', '效率的',
                '直接的', '逻辑的', '决断的', '传统的', '目标导向的'
            ],
            'ESFP': [
                '活力的', '热情的', '自发的', '适应的', '友好的',
                '实践的', '社交的', '表现的', '乐观的', '灵活的'
            ],
            'ESFJ': [
                '友好的', '负责的', '合作的', '传统的', '关怀的',
                '组织的', '体贴的', '实际的', '社交的', '和谐的'
            ]
        };
        const personalityLabelDescriptions = {
            'INTP': {
                '理性的': '倾向于用逻辑和理性分析问题，重视客观真理',
                '逻辑的': '善于发现事物间的逻辑关系，追求系统性理解',
                '创新的': '喜欢探索新想法，勇于挑战传统观念',
                '独立的': '享受独立思考和工作，不依赖他人的认可',
                '好奇的': '对知识和概念有强烈的求知欲，喜欢深入研究',
                '分析的': '善于分解复杂问题，找出核心要素',
                '沉静的': '倾向于安静思考，不喜欢喧闹的环境',
                '灵活的': '思维灵活，能从多个角度看待问题',
                '适应的': '能够根据逻辑需求调整自己的想法和方法',
                '客观的': '追求客观事实，不受个人情感影响'
            },
            'INTJ': {
                '战略的': '善于长远规划，着眼于未来发展',
                '独立的': '高度自主，依靠自己的判断做决定',
                '分析的': '深入分析问题，寻找最优解决方案',
                '决断的': '一旦确定目标，会坚定地执行计划',
                '理性的': '基于逻辑和事实做决策，而非情感',
                '完美的': '追求高标准，致力于持续改进',
                '创新的': '勇于突破常规，探索创新解决方案',
                '专注的': '能够长期专注于重要目标和项目',
                '有远见的': '能预见未来趋势和可能的发展方向',
                '系统的': '善于建立和优化系统化的方法'
            },
            'INFP': {
                '理想的': '追求更美好的可能性，有强烈的理想主义倾向',
                '富同情心的': '深刻理解他人感受，富有同理心',
                '创造的': '具有丰富的想象力和创造力',
                '忠诚的': '对重要的人和价值观保持忠诚',
                '适应的': '能根据情况灵活调整自己的方式',
                '温和的': '处事温和，避免冲突和对抗',
                '关怀的': '真诚关心他人的需求和感受',
                '敏感的': '对周围环境和他人情绪高度敏感',
                '包容的': '愿意接纳不同的观点和价值观',
                '真诚的': '重视真实的自我表达和真诚的关系'
            },
            'INFJ': {
                '洞察的': '能深入理解他人和情境的深层含义',
                '理想的': '追求完美和理想化的解决方案',
                '富同情心的': '天生具有同理心，理解他人感受',
                '有远见的': '能预见未来发展和潜在问题',
                '创造的': '具有独特的创造力和想象力',
                '温和的': '行事温和，避免直接冲突',
                '坚定的': '在核心价值观上保持坚定',
                '完美的': '追求完美，要求高标准',
                '独特的': '思维方式和处事风格独特',
                '神秘的': '给人深邃神秘的印象'
            },
            'ISTP': {
                '灵活的': '能够快速适应新情况和环境',
                '冷静的': '面对问题保持冷静理性',
                '实践的': '喜欢动手实践，解决具体问题',
                '逻辑的': '依照逻辑思维处理问题',
                '独立的': '喜欢独立工作和思考',
                '适应的': '适应力强，能随机应变',
                '观察的': '善于观察细节和技术特点',
                '效率的': '追求高效率的解决方案',
                '冒险的': '愿意尝试新事物和冒险',
                '客观的': '保持客观中立的态度'
            },
            'ISTJ': {
                '可靠的': '做事可靠，值得信赖',
                '实际的': '注重实际和现实可行性',
                '系统的': '喜欢有序和系统化的方法',
                '尽责的': '对职责认真负责',
                '传统的': '尊重传统和既定规则',
                '组织的': '善于组织和安排事务',
                '稳重的': '行事稳重，不冒进',
                '专注的': '能专注于任务直到完成',
                '逻辑的': '按照逻辑思维行事',
                '保守的': '倾向于保守稳妥的方案'
            },
            'ISFP': {
                '艺术的': '具有艺术天赋和审美能力',
                '灵活的': '能灵活应对各种情况',
                '敏感的': '对美和情感敏感',
                '和谐的': '追求人际关系的和谐',
                '自然的': '为人自然，不做作',
                '观察的': '善于观察周围的细节',
                '适应的': '适应能力强',
                '忠诚的': '对重要的人和事保持忠诚',
                '温和的': '性格温和，待人友善',
                '关怀的': '关心他人的感受'
            },
            'ISFJ': {
                '忠诚的': '对他人和职责保持忠诚',
                '体贴的': '细心体贴他人需求',
                '负责的': '做事负责任，可靠',
                '传统的': '重视传统价值观',
                '实际的': '注重实际和细节',
                '细心的': '注意细节，认真仔细',
                '温和的': '性格温和，平易近人',
                '可靠的': '做事可靠，值得信赖',
                '组织的': '善于组织和规划',
                '保护的': '愿意保护和照顾他人'
            },
            'ENTP': {
                '创新的': '善于提出创新想法和解决方案',
                '活力的': '充满活力和热情',
                '适应的': '适应能力强，灵活多变',
                '机智的': '反应快，思维敏捷',
                '灵活的': '思维和行动都很灵活',
                '分析的': '善于分析问题和概念',
                '好奇的': '对新事物保持强烈好奇心',
                '理论的': '喜欢探讨理论和可能性',
                '战略的': '具有战略思维能力',
                '辩论的': '善于辩论和表达观点'
            },
            'ENTJ': {
                '领导的': '具有天生的领导才能',
                '决断的': '善于做出决策并执行',
                '战略的': '具有长远的战略眼光',
                '自信的': '对自己的能力充满信心',
                '效率的': '追求高效率和结果',
                '直接的': '表达直接，不拐弯抹角',
                '理性的': '用理性方式处理问题',
                '目标导向的': '强烈关注目标实现',
                '分析的': '善于分析和规划',
                '有魄力的': '做事果断，有决断力'
            },
            'ENFP': {
                '热情的': '对生活充满热情和活力',
                '创造的': '富有创造力和想象力',
                '适应的': '适应能力强，思维灵活',
                '创新的': '喜欢尝试新事物和想法',
                '活力的': '精力充沛，富有感染力',
                '乐观的': '保持乐观积极的态度',
                '灵活的': '处事灵活，不拘泥于规则',
                '关怀的': '关心他人的感受和需求',
                '自发的': '行动自发，随性而为',
                '表现的': '善于表达自己的想法'
            },
            'ENFJ': {
                '热情的': '对他人和事业充满热情',
                '富同情心的': '深刻理解和关心他人',
                '负责的': '对承诺负责任',
                '理想的': '追求理想和完美',
                '社交的': '善于社交和建立关系',
                '合作的': '重视团队合作',
                '关怀的': '真诚关心他人福祉',
                '忠诚的': '对关系和理想保持忠诚',
                '有魅力的': '具有个人魅力和感染力',
                '鼓舞的': '善于激励和鼓舞他人'
            },
            'ESTP': {
                '活力的': '充满活力和行动力',
                '冒险的': '喜欢冒险和刺激',
                '实践的': '重视实践和实际行动',
                '灵活的': '能灵活应对各种情况',
                '自发的': '行动自发，随机应变',
                '适应的': '适应能力强',
                '行动的': '偏好立即行动',
                '果断的': '决策果断，不拖延',
                '效率的': '追求效率和实效',
                '现实的': '注重现实和实际'
            },
            'ESTJ': {
                '组织的': '善于组织和管理',
                '实际的': '注重实际效果',
                '负责的': '责任心强',
                '系统的': '喜欢系统化的方法',
                '效率的': '追求效率和成果',
                '直接的': '沟通直接明确',
                '逻辑的': '依据逻辑做决定',
                '决断的': '决策果断迅速',
                '传统的': '尊重传统和规则',
                '目标导向的': '注重目标达成'
            },
            'ESFP': {
                '活力的': '充满活力和热情',
                '热情的': '对生活充满热情',
                '自发的': '行动自发，随性而为',
                '适应的': '适应能力强',
                '友好的': '待人友好亲切',
                '实践的': '注重实际体验',
                '社交的': '善于社交互动',
                '表现的': '善于表现自我',
                '乐观的': '保持乐观积极',
                '灵活的': '处事灵活机动'
            },
            'ESFJ': {
                '友好的': '待人友善和蔼',
                '负责的': '对责任认真负责',
                '合作的': '重视团队合作',
                '传统的': '尊重传统价值观',
                '关怀的': '关心他人需求',
                '组织的': '善于组织安排',
                '体贴的': '为他人着想',
                '实际的': '注重实际需求',
                '社交的': '善于社交互动',
                '和谐的': '追求人际和谐'
            }
        };
        const typeDescriptions = {
            'INTP': '擅长理论分析和解决复杂问题的思考者。他们喜欢探索想法，理解概念的内在逻辑，并且总是寻求更深层的知识。独立性强，重视智识的追求，但可能需要更多关注实践和情感表达。他们通常在科学研究、技术开发、系统分析等领域表现出色。',

            'INTJ': '战略性的规划者和富有远见的思考者。他们善于制定系统性的解决方案，并且有很强的洞察力。追求效率和卓越，具有独立的思维方式和坚定的决心。他们通常在战略规划、系统设计和创新领域有出色表现。',

            'INFP': '富有同理心和创造力的理想主义者。他们重视个人价值观和内在和谐，对他人的情感有敏锐的感知能力。具有强烈的创造力和表达欲望，追求真实和意义。他们常在艺术创作、心理咨询、写作等领域展现才华。',

            'INFJ': '具有洞察力和远见的理想主义者。他们能深入理解他人，同时保持独特的个人视角。重视和谐与个人成长，具有强烈的使命感。他们往往在咨询、教育、创意写作等需要深度理解和创造力的领域表现出色。',

            'ISTP': '灵活的问题解决者和技术专家。他们善于理解系统如何运作，并且有很强的动手能力。喜欢探索和冒险，追求自由和独立。他们通常在工程技术、手工艺、运动等需要实践技能的领域表现优秀。',

            'ISTJ': '可靠、务实的传统维护者。他们重视秩序和规则，关注细节和准确性。具有强烈的责任感和忠诚度，依赖经验和事实做决策。他们常在行政管理、财务会计、质量控制等需要精确和可靠性的领域有出色表现。',

            'ISFP': '富有艺术感和同理心的探索者。他们重视个人体验和审美，具有强烈的创造力。追求自由表达和真实生活，对美和和谐有敏锐的感知。他们常在艺术、设计、手工艺等创造性领域展现才华。',

            'ISFJ': '细心、负责的照顾者和守护者。他们具有强烈的责任感和服务精神，关注他人的需求。重视传统和稳定，善于记忆细节。他们通常在护理、教育、客户服务等需要耐心和关怀的领域表现出色。',

            'ENTP': '充满创意和想象力的创新者。他们善于发现新的可能性，喜欢挑战常规思维。适应力强，享受智力挑战和辩论。他们常在创业、咨询、研发等需要创新思维的领域有杰出表现。',

            'ENTJ': '果断的领导者和战略规划者。他们有组织能力和远见，追求效率和成功。目标导向，善于规划和执行。他们通常在企业管理、项目领导、战略咨询等需要领导力的领域表现优秀。',

            'ENFP': '热情、创造性的激励者。他们充满活力和创造力，善于激发他人潜能。追求新可能性，重视自由和真实表达。他们常在创意工作、培训教育、公共关系等需要创造力和人际交往的领域有出色表现。',

            'ENFJ': '富有魅力的引导者和培养者。他们关注他人成长和团体和谐，具有领导才能。善于激励他人，追求意义和真实关系。他们通常在教育、咨询、组织发展等需要领导力和人际互动的领域表现出色。',

            'ESTP': '充满活力的行动者和问题解决者。他们善于在当下行动，享受刺激和挑战。适应力强，善于解决即时问题。他们常在销售、创业、运动等需要快速反应和实践能力的领域有杰出表现。',

            'ESTJ': '高效的组织者和执行者。他们重视秩序和规则，善于管理和执行。实用主义者，追求具体成果。他们通常在项目管理、行政管理、法律等需要组织能力和执行力的领域表现优秀。',

            'ESFP': '活泼的表演者和享乐主义者。他们热爱生活和社交，善于让他人开心。适应力强，喜欢即时体验。他们常在表演艺术、销售、公共关系等需要表现力和社交能力的领域有出色表现。',

            'ESFJ': '热心的社交者和关怀者。他们关注他人需求，重视和谐关系。具有强烈的责任感和服务精神，重视传统和社会价值。他们通常在社会服务、医疗保健、教育等需要人际交往和服务精神的领域表现优秀。'
        };
        // 位置说明
        const positionDescriptions = [
            '主导功能 - 最自然和熟练使用的功能',
            '辅助功能 - 支持主导功能的平衡器',
            '第三功能 - 较不成熟，需要发展的功能',
            '劣势功能 - 最不发达的意识功能',
            '对立角色 - 主导功能的对立面',
            '批判角色 - 辅助功能的对立面',
            '欺骗角色 - 第三功能的对立面',
            '恶魔角色 - 最不发达的无意识功能'
        ];

        // 象限数据
        const quadras = {
            'Alpha': {
                types: ['ENTP', 'INTP', 'ISFJ', 'ESFJ'],
                description: '重视开放讨论、创新思维、舒适氛围。偏好逻辑分析和可能性探索，强调知识共享和和谐关系。'
            },
            'Beta': {
                types: ['ESTP', 'ISTP', 'ENFJ', 'INFJ'],
                description: '重视力量、意志力和集体行动。强调纪律、责任和社会变革，偏好果断决策和强力领导。'
            },
            'Gamma': {
                types: ['ENTJ', 'INTJ', 'ESFP', 'ISFP'],
                description: '注重效率和实际成果。追求目标达成和现实利益，重视个人成就和影响力。'
            },
            'Delta': {
                types: ['ESTJ', 'ISTJ', 'ENFP', 'INFP'],
                description: '追求稳定和渐进改革。重视道德价值和个人成长，注重实用性和可靠性。'
            }
        };

        // 初始化选择框
        function initializeSelect() {
            const select = document.getElementById('mbti-select');
            const compareSelect = document.getElementById('compare-select');

            Object.entries(mbtiTypes).forEach(([type, data]) => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = `${type} - ${data.name}`;
                select.appendChild(option);

                // 为比较选择框创建选项
                const compareOption = option.cloneNode(true);
                compareSelect.appendChild(compareOption);
            });
        }

        // 渲染认知功能堆栈
        function renderFunctionStack(type) {
            const stackContainer = document.querySelector('.function-stack');
            stackContainer.innerHTML = '';

            if (!type || !mbtiTypes[type]) return;

            const typeHeader = document.createElement('div');
            typeHeader.className = 'type-header';
            typeHeader.innerHTML = `
        <div style="
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        ">
            <h2 style="
                color: var(--primary-color);
                margin-bottom: 1rem;
                font-size: 1.5rem;
                display: flex;
                align-items: center;
                gap: 1rem;
            ">
                <span>${type}</span>
                <span style="color: var(--text-gray); font-size: 1.25rem;">|</span>
                <span>${mbtiTypes[type].name}</span>
            </h2>

            <div class="type-dimensions" style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-bottom: 1.5rem;
            ">
                <div class="dimension" style="
                    padding: 0.75rem;
                    background: var(--bg-gray);
                    border-radius: 0.5rem;
                ">
                    <strong>${type[0] === 'E' ? '外向 (E)' : '内向 (I)'}</strong><br>
                    <span style="font-size: 0.875rem; color: var(--text-gray);">
                        ${type[0] === 'E' ? '从外部世界获取能量' : '从内部世界获取能量'}
                    </span>
                </div>
                <div class="dimension" style="
                    padding: 0.75rem;
                    background: var(--bg-gray);
                    border-radius: 0.5rem;
                ">
                    <strong>${type[1] === 'S' ? '感知 (S)' : '直觉 (N)'}</strong><br>
                    <span style="font-size: 0.875rem; color: var(--text-gray);">
                        ${type[1] === 'S' ? '关注具体的事实和细节' : '关注概念和可能性'}
                    </span>
                </div>
                <div class="dimension" style="
                    padding: 0.75rem;
                    background: var(--bg-gray);
                    border-radius: 0.5rem;
                ">
                    <strong>${type[2] === 'T' ? '思考 (T)' : '情感 (F)'}</strong><br>
                    <span style="font-size: 0.875rem; color: var(--text-gray);">
                        ${type[2] === 'T' ? '基于逻辑做出决策' : '基于价值观做出决策'}
                    </span>
                </div>
                <div class="dimension" style="
                    padding: 0.75rem;
                    background: var(--bg-gray);
                    border-radius: 0.5rem;
                ">
                    <strong>${type[3] === 'J' ? '判断 (J)' : '知觉 (P)'}</strong><br>
                    <span style="font-size: 0.875rem; color: var(--text-gray);">
                        ${type[3] === 'J' ? '倾向计划和决策' : '倾向灵活和适应'}
                    </span>
                </div>
            </div>

            <div style="
                background: var(--bg-gray);
                padding: 1rem;
                border-radius: 0.5rem;
                margin-bottom: 1.5rem;
                color: var(--text-gray);
                line-height: 1.6;
            ">
                ${typeDescriptions[type]}
            </div>

            <div class="personality-labels" style="
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                margin-bottom: 1rem;
            ">
                ${personalityLabels[type].map(label => `
                    <span class="personality-label" data-label="${label}" style="
                        background: var(--bg-gray);
                        padding: 0.25rem 0.75rem;
                        border-radius: 1rem;
                        font-size: 0.875rem;
                        color: var(--primary-color);
                        border: 1px solid var(--border-color);
                        cursor: pointer;
                        transition: all 0.2s;
                    ">${label}</span>
                `).join('')}
            </div>

            <div class="label-description" style="
                display: none;
                background: white;
                padding: 1rem;
                border-radius: 0.5rem;
                box-shadow: var(--card-shadow);
                margin-top: 1rem;
                border: 1px solid var(--border-color);
                animation: fadeIn 0.2s ease-out;
                color: var(--text-gray);
            "></div>
        </div>

        <div style="
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        ">
            <h3 style="
                color: var(--primary-color);
                margin-bottom: 1.5rem;
                font-size: 1.25rem;
            ">认知功能堆栈</h3>
            <div class="function-stack-inner"></div>
        </div>
    `;
            stackContainer.appendChild(typeHeader);

            // 添加标签交互
            const labelDescription = typeHeader.querySelector('.label-description');
            typeHeader.querySelectorAll('.personality-label').forEach(label => {
                label.addEventListener('mouseover', () => {
                    const labelText = label.dataset.label;
                    labelDescription.textContent = personalityLabelDescriptions[type][labelText];
                    labelDescription.style.display = 'block';

                    // 更新所有标签样式
                    typeHeader.querySelectorAll('.personality-label').forEach(l => {
                        if (l === label) {
                            l.style.background = 'var(--primary-color)';
                            l.style.color = 'white';
                            l.style.transform = 'translateY(-2px)';
                            l.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                        } else {
                            l.style.background = 'var(--bg-gray)';
                            l.style.color = 'var(--primary-color)';
                            l.style.transform = 'none';
                            l.style.boxShadow = 'none';
                        }
                    });
                });
            });

            // 点击其他地方隐藏标签说明
            document.addEventListener('click', (e) => {
                if (!e.target.classList.contains('personality-label')) {
                    labelDescription.style.display = 'none';
                    typeHeader.querySelectorAll('.personality-label').forEach(label => {
                        label.style.background = 'var(--bg-gray)';
                        label.style.color = 'var(--primary-color)';
                        label.style.transform = 'none';
                        label.style.boxShadow = 'none';
                    });
                }
            });

            // 渲染认知功能堆栈
            const functionStackInner = typeHeader.querySelector('.function-stack-inner');
            mbtiTypes[type].stack.forEach((func, index) => {
                const functionItem = document.createElement('div');
                functionItem.className = 'function-item';

                const funct = functionDescriptions[func];
                functionItem.innerHTML = `
            <div style="
                display: flex;
                align-items: start;
                gap: 1rem;
                padding: 1rem;
                background: var(--bg-gray);
                border-radius: 0.5rem;
                margin-bottom: 1rem;
                transition: all 0.2s;
            ">
                <div style="
                    font-weight: bold;
                    font-size: 1.125rem;
                    min-width: 3rem;
                    color: var(--primary-color);
                ">${func}</div>
                <div style="flex: 1;">
                    <div style="
                        margin-bottom: 0.5rem;
                        font-weight: 500;
                    ">${funct.name} - ${funct.description}</div>
                    <div style="
                        font-size: 0.875rem;
                        color: var(--text-gray);
                    ">
                        <div style="
                            margin-bottom: 0.5rem;
                            padding-bottom: 0.5rem;
                            border-bottom: 1px solid var(--border-color);
                        ">${positionDescriptions[index]}</div>
                        ${funct['position' + (index + 1) + 'Desc'].map(desc =>
                    `<div style="
                                margin-bottom: 0.25rem;
                                padding-left: 1rem;
                                position: relative;
                            ">
                                <span style="
                                    position: absolute;
                                    left: 0;
                                    color: var(--primary-color);
                                ">●</span>
                                ${desc}
                            </div>`
                ).join('')}
                    </div>
                </div>
            </div>
        `;
                functionStackInner.appendChild(functionItem);
            });

            // 添加悬浮效果
            functionStackInner.querySelectorAll('.function-item > div').forEach(item => {
                item.addEventListener('mouseover', () => {
                    item.style.transform = 'translateY(-2px)';
                    item.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1)';
                });
                item.addEventListener('mouseout', () => {
                    item.style.transform = 'none';
                    item.style.boxShadow = 'none';
                });
            });
        }
        // 渲染Socionics信息
        function renderSocionicsInfo(type) {
            const socionicsContainer = document.querySelector('.socionics-info');
            if (!type || !socionicsTypes[type]) {
                socionicsContainer.innerHTML = '';
                return;
            }

            const socionicType = socionicsTypes[type];
            socionicsContainer.innerHTML = `
        <div class="socionics-card">
            <h3>类型信息</h3>
            <p><strong>Socionics类型:</strong> ${socionicType.type} (${socionicType.name})</p>
            <p><strong>所属象限:</strong> ${socionicType.quadra}</p>
            <p><strong>类型描述:</strong> ${socionicType.description}</p>
        </div>

        <div class="socionics-card">
            <h3>关系网络</h3>
            <div class="relationship-grid">
                <div class="relationship-item">
                    <h4>二元关系</h4>
                    <p>${socionicType.romance}</p>
                </div>
                <div class="relationship-item">
                    <h4>利益关系</h4>
                    <p>${socionicType.benefit}</p>
                </div>
                <div class="relationship-item">
                    <h4>监督关系</h4>
                    <p>${socionicType.supervision}</p>
                </div>
            </div>
        </div>
    `;
        }

        // 渲染象限信息
        function renderQuadraInfo(type) {
            const quadraContainer = document.querySelector('.quadra-info');
            if (!type) {
                quadraContainer.innerHTML = '';
                return;
            }

            let quadraName;
            for (const [name, data] of Object.entries(quadras)) {
                if (data.types.includes(type)) {
                    quadraName = name;
                    quadraContainer.innerHTML = `
                <div class="quadra-title">${name}象限</div>
                <div class="quadra-description">${data.description}</div>
                <div class="type-list">
                    <h4>同象限类型：</h4>
                    ${data.types.map(t => `<span class="type-tag">${t} - ${mbtiTypes[t].name}</span>`).join('')}
                </div>
            `;
                    break;
                }
            }
        }

        // 渲染类型比较
        function renderComparison(type1, type2) {
            const container = document.querySelector('.comparison-container');
            if (!type1 || !type2 || !mbtiTypes[type1] || !mbtiTypes[type2]) {
                container.innerHTML = '';
                return;
            }

            const stack1 = mbtiTypes[type1].stack;
            const stack2 = mbtiTypes[type2].stack;

            container.innerHTML = `
        <div class="type-column">
            <h3>${type1} - ${mbtiTypes[type1].name}</h3>
            <div class="function-stack">
                ${renderFunctionStackHTML(stack1)}
            </div>
        </div>
        <div class="type-column">
            <h3>${type2} - ${mbtiTypes[type2].name}</h3>
            <div class="function-stack">
                ${renderFunctionStackHTML(stack2)}
            </div>
        </div>
    `;
        }

        function renderFunctionStackHTML(stack) {
            return stack.map((func, index) => {
                const funct = functionDescriptions[func];
                return `
        <div class="function-item">
            <div class="function-code">${func}</div>
            <div class="function-details">
                <div class="function-description">${functionDescriptions[func].name}</div>
                <div class="position-description">${positionDescriptions[index]}<br>●${funct['position' + (index + 1) + 'Desc'].join('<br>●')}</div>
            </div>
        </div>
    `}).join('');
        }

        // 渲染成长建议
        function renderGrowthAdvice(type) {
            const container = document.querySelector('.growth-card');
            if (!type || !growthAdvice[type]) {
                container.innerHTML = '';
                return;
            }

            const advice = growthAdvice[type];
            container.innerHTML = `
        <h3>个性优势</h3>
        <ul>${advice.strengths.map(s => `<li>${s}</li>`).join('')}</ul>
        
        <h3>发展机会</h3>
        <ul>${advice.weaknesses.map(w => `<li>${w}</li>`).join('')}</ul>
        
        <h3>成长建议</h3>
        <ul>${advice.advice.map(a => `<li>${a}</li>`).join('')}</ul>
    `;
        }

        // 测试相关函数
        let currentQuestion = 0;
        let answers = {
            E: 0, I: 0,
            S: 0, N: 0,
            T: 0, F: 0,
            J: 0, P: 0
        };

        function startTest() {
            currentQuestion = 0;
            answers = {
                E: 0, I: 0,
                S: 0, N: 0,
                T: 0, F: 0,
                J: 0, P: 0
            };
            renderQuestion();
            document.querySelector('.result-card').style.display = 'none';
            document.querySelector('.test-button').style.display = 'none';
        }

        function renderQuestion() {
            const container = document.querySelector('.question-container');
            if (currentQuestion >= testQuestions.length) {
                showResults();
                return;
            }

            const question = testQuestions[currentQuestion];
            container.innerHTML = `
        <div class="question">
            <h3>${question.question}</h3>
            <div class="options">
                ${question.options.map((opt, idx) => `
                    <div class="option" data-type="${opt.type}">
                        ${opt.text}
                    </div>
                `).join('')}
            </div>
        </div>
    `;

            // 更新进度条
            const progress = document.querySelector('.progress');
            progress.style.width = `${(currentQuestion + 1) / testQuestions.length * 100}%`;
        }

        function showResults() {
            const result = calculateType();
            const resultCard = document.querySelector('.result-card');
            resultCard.style.display = 'block';
            resultCard.innerHTML = `
        <h3>你的MBTI类型可能是：</h3>
        <div class="result-details">
            <p><strong>${result}</strong> - ${mbtiTypes[result].name}</p>
            <p>这个结果仅供参考，建议进行更详细的专业测试。</p>
        </div>
    `;

            document.querySelector('.test-button').style.display = 'block';
            document.querySelector('.question-container').innerHTML = '';
        }

        function calculateType() {
            const type = [
                answers.E > answers.I ? 'E' : 'I',
                answers.S > answers.N ? 'S' : 'N',
                answers.T > answers.F ? 'T' : 'F',
                answers.J > answers.P ? 'J' : 'P'
            ].join('');
            return type;
        }

        // 事件监听器设置
        function setupEventListeners() {
            // MBTI类型选择
            const select = document.getElementById('mbti-select');
            select.addEventListener('change', (e) => {
                const type = e.target.value;
                renderFunctionStack(type);
                renderSocionicsInfo(type);
                renderQuadraInfo(type);
                renderGrowthAdvice(type);
            });

            // 比较类型选择
            const compareSelect = document.getElementById('compare-select');
            compareSelect.addEventListener('change', (e) => {
                const mainType = select.value;
                const compareType = e.target.value;
                renderComparison(mainType, compareType);
            });

            // 标签切换
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    const targetId = tab.dataset.tab;
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(targetId).classList.add('active');

                    if (targetId === 'test') {
                        startTest();
                    }
                });
            });

            // 测试选项点击
            document.querySelector('.question-container').addEventListener('click', (e) => {
                if (e.target.classList.contains('option')) {
                    const type = e.target.dataset.type;
                    answers[type]++;
                    currentQuestion++;
                    renderQuestion();
                }
            });

            // 重新开始测试按钮
            document.querySelector('.test-button').addEventListener('click', startTest);
        }

        // 初始化应用
        function initializeApp() {
            initializeSelect();
            setupEventListeners();
        }

        // 启动应用
        document.addEventListener('DOMContentLoaded', initializeApp);

    </script>
</body>

</html>
